<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ay≈üe'ye √ñzel ‚ù§Ô∏è</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #ff5c8d;
            --secondary-color: #ff8fa3;
            --bg-gradient-start: #fff0f3;
            --bg-gradient-end: #ffe3e8;
            --text-color: #641e34;
            --glass-bg: rgba(255, 255, 255, 0.6);
            --glass-border: rgba(255, 255, 255, 0.4);
            --shadow: 0 8px 32px 0 rgba(255, 92, 141, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
            color: var(--text-color);
            min-height: 100vh; 
            min-height: 100dvh; 
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* --- ARKAPLAN KALP ANƒ∞MASYONU --- */
        .heart-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            bottom: -50px;
            font-size: 24px;
            color: rgba(255, 92, 141, 0.2);
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* --- MEN√ú (NAVBAR) --- */
        nav {
            position: sticky;
            top: 15px;
            z-index: 1000;
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px 15px;
            margin: 0 auto;
            width: 95%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        nav button {
            background: transparent;
            border: none;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-color);
            padding: 10px 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        nav button.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 92, 141, 0.4);
            transform: scale(1.05);
        }

        /* --- SECTIONS --- */
        .section {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 100px 20px 40px 20px;
            min-height: 100dvh;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .section.active { display: flex; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- ANASAYFA --- */
        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: #d6336c;
            margin-bottom: 20px;
            text-align: center;
        }

        .hero-card {
            background: var(--glass-bg);
            padding: 30px;
            border-radius: 30px;
            box-shadow: var(--shadow);
            border: 1px solid white;
            text-align: center;
        }

        .hero-text p {
            font-size: 1.2rem;
            line-height: 1.7;
            font-weight: 600;
        }

        /* --- Gƒ∞ZEMLƒ∞ GALERƒ∞ (YENƒ∞) --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .photo-card {
            position: relative;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            aspect-ratio: 3/4;
            cursor: pointer;
        }

        .photo-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Buzlu Efekt */
            filter: blur(8px) brightness(0.9); 
            transition: all 0.5s ease;
        }

        /* "G√∂rmek i√ßin Dokun" Yazƒ±sƒ± */
        .tap-hint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            z-index: 2;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            pointer-events: none;
            width: 100%;
        }

        .tap-icon {
            font-size: 2rem;
            display: block;
            margin-bottom: 5px;
            animation: pulseIcon 1.5s infinite;
        }

        @keyframes pulseIcon {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* MODAL (B√úY√úK RESƒ∞M) */
        #imageModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        #imageModal.open {
            opacity: 1;
            pointer-events: auto;
        }

        #modalImg {
            max-width: 90%;
            max-height: 80%;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 92, 141, 0.5);
            transform: scale(0.8);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #imageModal.open #modalImg {
            transform: scale(1);
        }

        .close-modal {
            position: absolute;
            top: 30px;
            right: 30px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            z-index: 2001;
        }

        /* Kalp Patlamasƒ± Efekti */
        .explosion-heart {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            z-index: 2002;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(1.5) rotate(var(--rot)); opacity: 0; }
        }

        /* --- OYUN (FPS OPTƒ∞Mƒ∞ZE) --- */
        #game { padding-top: 50px; justify-content: flex-start; }
        
        .game-header {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            width: 100%;
            justify-content: center;
        }

        .stat-box {
            background: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 90px;
        }
        .stat-label { font-size: 0.75rem; color: #888; text-transform: uppercase; }
        .stat-value { font-size: 1.4rem; color: var(--primary-color); }

        #game-wrapper {
            position: relative;
            width: 100%;
            max-width: 380px; 
            aspect-ratio: 9/16; 
            background: #70c5ce;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            overflow: hidden;
            border: 4px solid white;
            touch-action: none; 
        }

        canvas { width: 100%; height: 100%; display: block; }

        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 10;
            transition: opacity 0.3s;
        }
        .overlay.hidden { opacity: 0; pointer-events: none; }
        
        .overlay h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem; color: white;
            text-shadow: 0 3px 6px rgba(0,0,0,0.4);
            margin-bottom: 10px;
        }

        .btn-play {
            background: #ff5c8d; color: white; border: none;
            padding: 12px 40px; font-size: 1.1rem; font-weight: bold;
            border-radius: 50px; cursor: pointer;
            box-shadow: 0 6px 0 #c43c68;
            transition: transform 0.1s;
        }
        .btn-play:active { transform: translateY(6px); box-shadow: none; }

    </style>
</head>
<body>

    <div class="heart-bg" id="heartBg"></div>

    <nav>
        <button onclick="showSection('home')" class="active">Ana Sayfa</button>
        <button onclick="showSection('gallery')">S√ºrpriz üì∑</button>
        <button onclick="showSection('game')">Oyun üéÆ</button>
    </nav>

    <div id="home" class="section active">
        <h1>Ay≈üe'm...</h1>
        <div class="hero-card">
            <div class="hero-text">
                <p>
                    Seninle ge√ßen her saniye, √∂mr√ºm√ºn en deƒüerli hediyesi.<br>
                    G√∂zlerin bana baktƒ±ƒüƒ±nda t√ºm d√ºnya duruyor sanki.<br><br>
                    Bu k√º√ß√ºk site, y√ºz√ºndeki o g√ºzel tebess√ºm√ºn sebebi olsun diye...<br>
                    Seni √ßok seviyorum. ‚ù§Ô∏è
                </p>
            </div>
        </div>
    </div>

    <div id="gallery" class="section">
        <h1>G√ºzelimden Fotolar</h1>
        <p style="margin-bottom: 20px; opacity: 0.8;">Fotoƒüraflarƒ±n gizemini √ß√∂zmek i√ßin dokun...</p>
        
        <div class="gallery-grid">
            <div class="photo-card" onclick="openModal(this)">
                <img src="foto1.jpg" alt="Ay≈üe" onerror="this.src='https://via.placeholder.com/300x400/ffccd5/590d22?text=Foto+1'">
                <div class="tap-hint">
                    <span class="tap-icon">‚ù§Ô∏è</span><br>G√∂rmek i√ßin Dokun
                </div>
            </div>
            <div class="photo-card" onclick="openModal(this)">
                <img src="foto2.jpg" alt="Ay≈üe" onerror="this.src='https://via.placeholder.com/300x400/ffccd5/590d22?text=Foto+2'">
                <div class="tap-hint">
                    <span class="tap-icon">‚ù§Ô∏è</span><br>G√∂rmek i√ßin Dokun
                </div>
            </div>
            <div class="photo-card" onclick="openModal(this)">
                <img src="foto3.jpg" alt="Ay≈üe" onerror="this.src='https://via.placeholder.com/300x400/ffccd5/590d22?text=Foto+3'">
                <div class="tap-hint">
                    <span class="tap-icon">‚ù§Ô∏è</span><br>G√∂rmek i√ßin Dokun
                </div>
            </div>
            <div class="photo-card" onclick="openModal(this)">
                <img src="foto4.jpg" alt="Ay≈üe" onerror="this.src='https://via.placeholder.com/300x400/ffccd5/590d22?text=Foto+4'">
                <div class="tap-hint">
                    <span class="tap-icon">‚ù§Ô∏è</span><br>G√∂rmek i√ßin Dokun
                </div>
            </div>
            <div class="photo-card" onclick="openModal(this)">
                <img src="foto5.jpg" alt="Ay≈üe" onerror="this.src='https://via.placeholder.com/300x400/ffccd5/590d22?text=Foto+5'">
                <div class="tap-hint">
                    <span class="tap-icon">‚ù§Ô∏è</span><br>G√∂rmek i√ßin Dokun
                </div>
            </div>
        </div>
    </div>

    <div id="imageModal" onclick="closeModal()">
        <span class="close-modal">&times;</span>
        <img id="modalImg" src="" alt="B√ºy√ºk Resim">
    </div>

    <div id="game" class="section">
        <div class="game-header">
            <div class="stat-box">
                <span class="stat-label">Skor</span>
                <div class="stat-value" id="scoreVal">0</div>
            </div>
            <div class="stat-box">
                <span class="stat-label">Rekor</span>
                <div class="stat-value" id="bestVal">0</div>
            </div>
        </div>

        <div id="game-wrapper">
            <canvas id="gameCanvas"></canvas>
            <div id="overlay" class="overlay">
                <h2 id="msg-title">Flappy Ay≈üe</h2>
                <p id="msg-subtitle" style="color:white; margin-bottom:15px;">Ba≈ülamak i√ßin Dokun</p>
                <button id="start-btn" class="btn-play">BA≈ûLA</button>
            </div>
        </div>
        <p style="margin-top:15px; opacity:0.7; font-size:0.9rem;">Zƒ±plamak i√ßin ekrana dokun</p>
    </div>

    <script>
        // --- Sƒ∞TE ANƒ∞MASYONLARI ---

        // B√∂l√ºm Deƒüi≈ütir
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if(sectionId === 'game') {
                resizeCanvas();
                resetGame(false);
            }
        }

        // Arkaplan Kalpleri
        function createHearts() {
            const container = document.getElementById('heartBg');
            for(let i=0; i<15; i++) {
                const heart = document.createElement('div');
                heart.classList.add('floating-heart');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 5 + 10) + 's';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heart.style.animationDelay = (Math.random() * 10) + 's';
                container.appendChild(heart);
            }
        }
        createHearts();

        // --- GALERƒ∞ VE KALP PATLAMASI EFEKTƒ∞ ---
        
        function openModal(card) {
            const img = card.querySelector('img');
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImg');
            
            modalImg.src = img.src;
            modal.classList.add('open');
            
            // Patlama Efekti (Ekranƒ±n ortasƒ±ndan)
            explodeHearts(window.innerWidth / 2, window.innerHeight / 2);
        }

        function closeModal() {
            document.getElementById('imageModal').classList.remove('open');
        }

        function explodeHearts(x, y) {
            const colors = ['#ff5c8d', '#ff8fa3', '#ffc2d1', '#fff'];
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.classList.add('explosion-heart');
                heart.innerHTML = '‚ù§Ô∏è';
                document.body.appendChild(heart);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 150 + 50;
                const tx = Math.cos(angle) * velocity + 'px';
                const ty = Math.sin(angle) * velocity + 'px';
                const rot = Math.random() * 360 + 'deg';
                
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                heart.style.setProperty('--tx', tx);
                heart.style.setProperty('--ty', ty);
                heart.style.setProperty('--rot', rot);
                
                // Animasyon bitince sil
                setTimeout(() => { heart.remove(); }, 1000);
            }
        }


        // --- OYUN MOTORU (FPS SABƒ∞TLEYƒ∞Cƒ∞Lƒ∞) ---

        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const wrapper = document.getElementById("game-wrapper");

        // Boyutlandƒ±rma
        function resizeCanvas() {
            const rect = wrapper.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            ctx.scale(dpr, dpr);
            GAME_WIDTH = rect.width;
            GAME_HEIGHT = rect.height;
            fg.h = GAME_HEIGHT * 0.15;
        }
        
        let GAME_WIDTH = 0;
        let GAME_HEIGHT = 0;
        
        const state = { current: 0, getReady: 0, game: 1, over: 2 };
        let score = 0;
        let highScore = localStorage.getItem('ayse_highscore') || 0;
        let frames = 0;

        document.getElementById('bestVal').innerText = highScore;

        // SES MOTORU
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            
            if (type === 'jump') {
                osc.frequency.setValueAtTime(350, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now); osc.stop(now + 0.1);
            } else if (type === 'score') {
                osc.frequency.setValueAtTime(800, now);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.1);
                osc.start(now); osc.stop(now + 0.1);
            } else if (type === 'hit') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            }
        }

        const birdImg = new Image();
        birdImg.src = "ayse_game.png";

        // NESNELER
        const bird = {
            x: 50, y: 150, w: 40, h: 40,
            speed: 0, gravity: 0.25, jump: -4.5, rotation: 0,
            
            draw: function() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                if(birdImg.complete && birdImg.naturalHeight !== 0) {
                    ctx.drawImage(birdImg, -this.w/2, -this.h/2, this.w, this.h);
                } else {
                    ctx.fillStyle = "#ff5c8d"; ctx.beginPath(); ctx.arc(0,0, this.w/2, 0, Math.PI*2); ctx.fill();
                    ctx.fillStyle = "white"; ctx.beginPath(); ctx.arc(6,-6, 4, 0, Math.PI*2); ctx.fill();
                }
                ctx.restore();
            },
            flap: function() { this.speed = this.jump; playTone('jump'); },
            update: function() {
                if (state.current === state.getReady) {
                    this.y = GAME_HEIGHT/2 - 50; this.rotation = 0;
                    this.y += Math.cos(Date.now()/300) * 1.5;
                } else {
                    this.speed += this.gravity;
                    this.y += this.speed;
                    if(this.speed < this.jump/2) this.rotation = -25 * Math.PI / 180;
                    else {
                        this.rotation += 4 * Math.PI / 180;
                        this.rotation = Math.min(Math.PI / 2, this.rotation);
                    }
                    if(this.y + this.h/2 >= GAME_HEIGHT - fg.h) {
                        this.y = GAME_HEIGHT - fg.h - this.h/2;
                        if(state.current === state.game) {
                            state.current = state.over;
                            playTone('hit');
                            showGameOver();
                        }
                    }
                }
            }
        };

        const fg = {
            h: 80,
            draw: function() {
                ctx.fillStyle = "#ded895"; ctx.fillRect(0, GAME_HEIGHT - this.h, GAME_WIDTH, this.h);
                ctx.fillStyle = "#73bf2e"; ctx.fillRect(0, GAME_HEIGHT - this.h, GAME_WIDTH, 12);
            }
        };

        const pipes = {
            position: [], w: 55, h: 400, gap: 130, dx: 2, // Hƒ±z sabit (2px/frame)
            draw: function() {
                for(let i=0; i<this.position.length; i++) {
                    let p = this.position[i];
                    let topY = p.y;
                    let bottomY = p.y + this.h + this.gap;
                    
                    let grd = ctx.createLinearGradient(p.x, 0, p.x + this.w, 0);
                    grd.addColorStop(0, "#558c22"); grd.addColorStop(0.5, "#9ce659"); grd.addColorStop(1, "#558c22");
                    ctx.fillStyle = grd;
                    
                    ctx.fillRect(p.x, topY, this.w, this.h);
                    ctx.fillRect(p.x, bottomY, this.w, this.h);
                    
                    ctx.fillStyle = "#46731d"; 
                    ctx.fillRect(p.x-2, topY+this.h-20, this.w+4, 20);
                    ctx.fillRect(p.x-2, bottomY, this.w+4, 20);
                }
            },
            update: function() {
                if(state.current !== state.game) return;
                
                // Boru Ekleme
                if(frames % 120 === 0) {
                    this.position.push({ x: GAME_WIDTH, y: -150 * (Math.random() + 1) });
                }
                
                for(let i=0; i<this.position.length; i++) {
                    let p = this.position[i];
                    
                    // Zorluk: Skor arttƒ±k√ßa hƒ±z √áOK AZ artar
                    let currentDx = this.dx + (Math.floor(score / 10) * 0.2); 
                    
                    p.x -= currentDx;

                    // √áarpƒ±≈üma
                    if(bird.x + bird.w/2 - 8 > p.x && bird.x - bird.w/2 + 8 < p.x + this.w &&
                       (bird.y - bird.h/2 + 8 < p.y + this.h || bird.y + bird.h/2 - 8 > p.y + this.h + this.gap)) {
                        state.current = state.over;
                        playTone('hit');
                        showGameOver();
                    }

                    if(p.x + this.w < bird.x && p.x + this.w + currentDx >= bird.x) {
                        score++;
                        playTone('score');
                        document.getElementById('scoreVal').innerText = score;
                        highScore = Math.max(score, highScore);
                        localStorage.setItem('ayse_highscore', highScore);
                        document.getElementById('bestVal').innerText = highScore;
                    }

                    if(p.x + this.w <= 0) {
                        this.position.shift();
                        i--;
                    }
                }
            },
            reset: function() { this.position = []; }
        };

        const bg = {
            draw: function() {
                ctx.fillStyle = "#70c5ce"; ctx.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
                ctx.fillStyle = "rgba(255,255,255,0.6)";
                
                let cloudX = (Date.now() / 50) % (GAME_WIDTH + 100);
                this.cloud(GAME_WIDTH - cloudX, 100);
                this.cloud((GAME_WIDTH/2) - cloudX + 100, 150);
            },
            cloud: function(x, y) {
                ctx.beginPath(); ctx.arc(x, y, 30, 0, Math.PI*2); ctx.arc(x+40, y+10, 35, 0, Math.PI*2); ctx.arc(x+80, y, 30, 0, Math.PI*2); ctx.fill();
            }
        };

        // --- ANA OYUN D√ñNG√úS√ú (FPS SABƒ∞TLEYƒ∞Cƒ∞) ---
        let lastTime = 0;
        const targetFPS = 60;
        const frameInterval = 1000 / targetFPS;

        function loop(timestamp) {
            if (!lastTime) lastTime = timestamp;
            const deltaTime = timestamp - lastTime;

            if (deltaTime >= frameInterval) {
                // Mantƒ±ƒüƒ± g√ºncelle
                bird.update();
                pipes.update();
                frames++; // Logic frames
                
                // √áizim
                bg.draw();
                pipes.draw();
                fg.draw();
                bird.draw();
                
                // Zamanƒ± d√ºzelt
                lastTime = timestamp - (deltaTime % frameInterval);
            }
            requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);

        // --- KONTROLLER ---
        const startBtn = document.getElementById("start-btn");
        const overlay = document.getElementById("overlay");
        const msgTitle = document.getElementById("msg-title");
        const msgSub = document.getElementById("msg-subtitle");

        function handleInput(e) {
            if(!document.getElementById('game').classList.contains('active')) return;
            if(e.type === 'keydown' && e.code !== 'Space') return;
            if(e.cancelable && e.type !== 'click') e.preventDefault();

            switch (state.current) {
                case state.getReady:
                    state.current = state.game;
                    overlay.classList.add('hidden');
                    playTone('jump');
                    break;
                case state.game:
                    bird.flap();
                    break;
                case state.over:
                    break;
            }
        }

        startBtn.addEventListener("click", () => {
            if(state.current === state.over) resetGame();
            else handleInput({type: 'click'});
        });
        wrapper.addEventListener("touchstart", handleInput, {passive: false});
        wrapper.addEventListener("mousedown", handleInput);
        window.addEventListener("keydown", handleInput);

        function resetGame(startImmediately = true) {
            bird.speed = 0; bird.rotation = 0; pipes.reset();
            score = 0; frames = 0;
            document.getElementById('scoreVal').innerText = score;
            state.current = state.getReady;
            overlay.classList.remove('hidden');
            msgTitle.innerText = "Flappy Ay≈üe";
            msgSub.innerText = "Ba≈ülamak i√ßin Dokun";
            startBtn.innerText = "BA≈ûLA";
        }

        function showGameOver() {
            overlay.classList.remove('hidden');
            msgTitle.innerText = "Oyun Bitti!";
            msgSub.innerText = "Skor: " + score;
            startBtn.innerText = "TEKRAR DENE";
        }
        
        window.onload = function() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        }

    </script>
</body>
</html>
